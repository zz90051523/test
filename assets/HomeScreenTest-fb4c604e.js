import{_ as f,l as h,p as v,n as b,o as l,f as d,c as i,w as c,B as p,s as S,v as T,x,y as H,z as $,U as y,F as k,r as w,q,S as B,g as o,t as s,e as z,C}from"./index-b431607f.js";const N={class:"mt-4"},V={class:"text-h6 mb-2"},W={class:"text-h2 mb-1 text-center"},I={connectTimeout:4e4,clientId:Math.random().toString(16).substring(2,8),username:"",password:"",clean:!0};var u=mqtt.connect("ws://broker.emqx.io:8083/mqtt",I);const K={data(){return{msg:"--",ammeter:[{Headline:"今日累績用電量",Temperature:"20",unit:""},{Headline:"本月累積用電量",Temperature:"23",unit:""},{Headline:"今年累積用電量",Temperature:"21",unit:""},{Headline:"年度同期用電比較",Temperature:"25",unit:"%"},{Headline:"今年累積CO2排放量",Temperature:"27",unit:""},{Headline:"工廠用電效益指數",Temperature:"22",unit:""},{Headline:"今日空調累積用電量",Temperature:"20",unit:"KW"},{Headline:"今日燒機累積用電量",Temperature:"23",unit:"KW"},{Headline:"台電契約容量",Temperature:"732",unit:"KW"}]}},created(){this.mqttMsg()},methods:{mqttMsg(){u.on("connect",a=>{console.log("連接成功！！！"),u.subscribe(["mee","mee1"],{qos:0},t=>{console.log(t?"訂閱失敗":"訂閱成功")})}),u.on("message",(a,t)=>{console.log("收到來自",a,"的消息",t.toString()),this.msg=t.toString();const n=JSON.parse(t.toString());switch(a){case"mee":this.ammeter[0].Temperature=n,console.log("資料");break;case"mee1":this.ammeter[1].Temperature=n;break;default:return}})}}},M=Object.assign(K,{__name:"HomeScreenTest",setup(a){h([S,T,x,H,$]),v(y);var t=[{name:"空調",value:3200},{name:"燒機",value:200},{name:"其他",value:1100}],n=t.reduce((e,m)=>e+m.value,0),_=e=>e.toString().replace(/(?=(\B)(\d{3})+$)/g,",");const g=b({title:{text:`{name|目前總耗電量}
{val|${_(n)}}`,left:"center",top:"center",textStyle:{rich:{name:{fontSize:14,color:"#666666",padding:[10,0]},val:{fontSize:32,fontWeight:"bold",color:"#333333"}}}},tooltip:{trigger:"item",formatter:e=>`${e.data.name}<br/>
  ${e.marker}<span style="color:${e.color}">消耗電量: ${e.value} 台</span><br/>
  ${e.marker}<span style="color:${e.color}">消耗比例: ${e.percent} %</span>`},series:[{type:"pie",data:t,radius:["40%","80%"],label:{position:"inner",formatter:`{name|{b}}
{value|{d}%}`,rich:{name:{fontSize:16,height:30,color:"#000"},value:{fontSize:16,color:"#000"}}}}]});return(e,m)=>(l(),d("div",N,[i(p,{class:"d-flex align-content-start flex-wrap justify-space-evenly mx-auto"},{default:c(()=>[(l(!0),d(k,null,w(e.ammeter,r=>(l(),z(p,{class:"mx-1 mb-5 rounded-xl bg-light-blue-lighten-2 pa-3",width:"30%","min-width":"300",variant:"outlined",key:r.Headline},{default:c(()=>[i(C,null,{default:c(()=>[o("div",null,[o("div",V,s(r.Headline),1),o("div",W,s(r.Temperature)+" "+s(r.unit),1)])]),_:2},1024)]),_:2},1024))),128)),i(q(B),{class:"chart",option:g.value},null,8,["option"]),o("p",null,s(e.msg),1)]),_:1})]))}}),j=f(M,[["__scopeId","data-v-36ee5aa7"]]);export{j as default};
